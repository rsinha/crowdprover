{% load dajaxice_templatetags %}
{% load url from future %}
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>proveIt</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!--script src="http://crowdprover.herokuapp.com/static/js/jquery-1.9.1.js"></script-->
    <script src="http://crowdprover.herokuapp.com/static/bootstrap/js/jquery.js"></script>
    <script src="http://code.jquery.com/jquery-migrate-1.0.0.js"></script>
    <!--script src="http://crowdprover.herokuapp.com/static/js/jquery-ui.js"></script-->
    <!-- Le styles -->

    <link href="http://crowdprover.herokuapp.com/static/bootstrap/css/bootstrap.css" rel="stylesheet">
    <link href="http://crowdprover.herokuapp.com/static/bootstrap/css/bootstrap-responsive.css" rel="stylesheet">
    <link href="http://crowdprover.herokuapp.com/static/bootstrap/css/docs.css" rel="stylesheet">


    <link rel="stylesheet" type="text/css" href="http://crowdprover.herokuapp.com/static/css/jquery.snippet.css" />
    <script type="text/javascript" src="http://crowdprover.herokuapp.com/static/js/jquery.snippet.js"></script>

    <script type="text/javascript">
    // Feedback about submitted invariant
    function feedback_callback(data){
      alert(data.message);
    }

    // Submit invariant to the server
    function send_invariant(){
      author = $("#Invariant_Form :input[name=author]").val();
      invariant = $("#Invariant_Form :input[name=content]").val();
      line = $("#Invariant_Form :input[name=line]").val();
      alert(author+" is submitting "+invariant+" as invariant for line " + line)
      Dajaxice.proveit.programs.suggestInvariant(feedback_callback,{'program_id':{{program.id}},'author':author,'invariant':invariant,'line':line});
    }
    // Submit loop invariant to the server
    function send_loop_invariant(){
      author = $("#LoopInvariant_Form :input[name=author]").val();
      invariant = $("#LoopInvariant_Form :input[name=content]").val();
      loop_id = $("#LoopInvariant_Form :input[name=loopid]").val();
      alert(author+" is submitting "+invariant+" as loop invariant for loop id " + loop_id)
      Dajaxice.proveit.programs.suggestLoopInvariant(feedback_callback,{'program_id':{{program.id}},'author':author,'invariant':invariant,'loop_id':loop_id});
    }

    $(document).ready(function(){
        $("pre.code1").snippet("cpp",{style:"navy",box:({{trace.firstLine}}).toString(),boxColor:"red",boxFill:"black",menu:false});
    });
    </script>


    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="http://crowdprover.herokuapp.com/static/bootstrap/js/html5shiv.js"></script>
    <![endif]-->

    <!-- Fav and touch icons -->
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="http://crowdprover.herokuapp.com/static/bootstrap/ico/apple-touch-icon-144-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="http://crowdprover.herokuapp.com/static/bootstrap/ico/apple-touch-icon-114-precomposed.png">
      <link rel="apple-touch-icon-precomposed" sizes="72x72" href="http://crowdprover.herokuapp.com/static/bootstrap/ico/apple-touch-icon-72-precomposed.png">
                    <link rel="apple-touch-icon-precomposed" href="http://crowdprover.herokuapp.com/static/bootstrap/ico/apple-touch-icon-57-precomposed.png">
                                   <link rel="shortcut icon" href="http://crowdprover.herokuapp.com/static/bootstrap/ico/favicon.png">

{% dajaxice_js_import %}

  </head>

  <body data-spy="scroll" data-target=".bs-docs-sidebar">

    <!-- Navbar
    ================================================== -->
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <button type="button" class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="brand" href="#">proveIt</a>
          <div class="nav-collapse collapse">
            <ul class="nav">
              <li class="">
                <a href="#">Home</a>
              </li>
              <li class="">
                <a href="#">Get Started</a>
              </li>
              <li class="">
                <a href="#">Accomplishments</a>
              </li>
              <li class="">
                <a href="#">Contact Us</a>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </div>



    <div class="container">

    <!-- Docs nav
    ================================================== -->
    <div class="row">
      <div class="span3 bs-docs-sidebar">
        <ul class="nav nav-list bs-docs-sidenav">
          <li><a href="#section_program"><i class="icon-chevron-right"></i> Code</a></li>
          <li><a href="#section_results"><i class="icon-chevron-right"></i> Results</a></li>
          <li><a href="#section_trace"><i class="icon-chevron-right"></i> Trace Visualizer</a></li>
          <li><a href="#section_feedback"><i class="icon-chevron-right"></i> Feedback</a></li>
        </ul>
      </div>
      <div class="span9">


      <section id="section_heading">
      <div class="page-header">
        <h3>Code</h3>
          <p>Review this program, and suggest us invariants that hold at different program points.
             You can use the trace visualizer to help understand this program's behaviour.
             You can also view what others have suggested.</p>
      </div>
      <section>


      <!-- Example row of columns -->
      <section id="section_program">
      <div class="row-fluid">
        <div class="span6">
          <pre class="code1">{{code}}</pre>
       </div>
        <div class="span6" align="right">
          <h5>Suggest an invariant for a specific line</h5>
          <div align="right"> 
            {% if error_message %}<p><strong>{{ error_message }}</strong></p>{% endif %}
	           <form action="javascript:void(0);" method="post" id="Invariant_Form">
	           {% csrf_token %}
	           <div>Your Name</br><textarea name="author" rows="1" cols="50"></textarea></div>
	           <div>Your Invariant</br><textarea name="content" rows="3" cols="50"></textarea></div>
	           <div>Line number after which your invariant holds</br><input type="number" name="line"></div>
	           <div><input type="submit" onclick="send_invariant();" value="Suggest Invariant" class="btn btn-primary"></div>
	           </form>
          </div>
        </div>
      </div>
      </section>


      <!-- Next
      ================================================== -->
      <section id="section_results">
        <div class="page-header">
          <h3>Results</h3>
          <p>Others have suggested the following invariants</p>
        </div>
      <div class="row-fluid">
        <div class="span6">
        <table class="table table-hover">
          <thead>
            <tr>
              <th>Status</th>
              <th>Invariant</th>
              <th>Line</th>
              <th>Author</th>
            </tr>
          </thead>
          <tbody>
	    {% for invariant in program.invariant_set.all %}
            <tr>
                {% if invariant.status == 0 %}
	          <td> <button class="btn btn-mini btn-warning" type="button">Unknown</button> </td>
                {% elif invariant.status == 1 %}
	          <td> <button class="btn btn-mini btn-success" type="button">Correct</button> </td>
                {% elif invariant.status == 2 %}
	          <td> <button class="btn btn-mini btn-danger" type="button">Incorrect</button> </td>
                {% elif invariant.status == 3 %}
	          <td> <button class="btn btn-mini btn-info" type="button">Axiom</button> </td>
                {% endif %}
                  <td> {{ invariant.content }} </td>
                  <td> {{ invariant.line }} </td>
                  <td> {{ invariant.author }} </td>
            </tr>
	    {% endfor %}
          </tbody>
        </table>
        </div> <!-- end span6-->
        <div class="span6">

        <table class="table table-hover">
          <thead>
            <tr>
              <th>Status</th>
              <th>Invariant</th>
              <th>Loop</th>
              <th>Author</th>
            </tr>
          </thead>
          <tbody>
	    {% for invariant in program.loopinvariant_set.all %}
            <tr>
                {% if invariant.status == 0 %}
	          <td> <button class="btn btn-mini btn-warning" type="button">Unknown</button> </td>
                {% elif invariant.status == 1 %}
	          <td> <button class="btn btn-mini btn-success" type="button">Correct</button> </td>
                {% elif invariant.status == 2 %}
	          <td> <button class="btn btn-mini btn-danger" type="button">Incorrect</button> </td>
                {% elif invariant.status == 3 %}
	          <td> <button class="btn btn-mini btn-info" type="button">Axiom</button> </td>
                {% endif %}
                  <td> {{ invariant.content }} </td>
                  <td> {{ invariant.loopId }} </td>
                  <td> {{ invariant.author }} </td>
            </tr>
	    {% endfor %}
          </tbody>
        </table>
        </div> <!-- end span6-->
      </div>
      </section>

     </div>
     </div>
    </div> <!-- /container -->

<!--
Scratch:

-->

    <!-- Footer
    ================================================== -->
    <footer class="footer">
      <div class="container">
        <p>Designed and built with all the love in the world by <a href="http://twitter.com/mdo" target="_blank">@mdo</a> and <a href="http://twitter.com/fat" target="_blank">@fat</a>.</p>
        <p>Code licensed under <a href="http://www.apache.org/licenses/LICENSE-2.0" target="_blank">Apache License v2.0</a>, documentation under <a href="http://creativecommons.org/licenses/by/3.0/">CC BY 3.0</a>.</p>
        <p><a href="http://glyphicons.com">Glyphicons Free</a> licensed under <a href="http://creativecommons.org/licenses/by/3.0/">CC BY 3.0</a>.</p>
        <ul class="footer-links">
          <li><a href="http://blog.getbootstrap.com">Blog</a></li>
          <li class="muted">&middot;</li>
          <li><a href="https://github.com/twitter/bootstrap/issues?state=open">Issues</a></li>
          <li class="muted">&middot;</li>
          <li><a href="https://github.com/twitter/bootstrap/blob/master/CHANGELOG.md">Changelog</a></li>
        </ul>
      </div>
    </footer>


    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster-->
    <script src="http://crowdprover.herokuapp.com/static/bootstrap/js/bootstrap-transition.js"></script>
    <script src="http://crowdprover.herokuapp.com/static/bootstrap/js/bootstrap-alert.js"></script>
    <script src="http://crowdprover.herokuapp.com/static/bootstrap/js/bootstrap-modal.js"></script>
    <script src="http://crowdprover.herokuapp.com/static/bootstrap/js/bootstrap-dropdown.js"></script>
    <script src="http://crowdprover.herokuapp.com/static/bootstrap/js/bootstrap-scrollspy.js"></script>
    <script src="http://crowdprover.herokuapp.com/static/bootstrap/js/bootstrap-tab.js"></script>
    <script src="http://crowdprover.herokuapp.com/static/bootstrap/js/bootstrap-tooltip.js"></script>
    <script src="http://crowdprover.herokuapp.com/static/bootstrap/js/bootstrap-popover.js"></script>
    <script src="http://crowdprover.herokuapp.com/static/bootstrap/js/bootstrap-button.js"></script>
    <script src="http://crowdprover.herokuapp.com/static/bootstrap/js/bootstrap-collapse.js"></script>
    <script src="http://crowdprover.herokuapp.com/static/bootstrap/js/bootstrap-carousel.js"></script>
    <script src="http://crowdprover.herokuapp.com/static/bootstrap/js/bootstrap-typeahead.js"></script>
    <script src="http://crowdprover.herokuapp.com/static/bootstrap/js/bootstrap-affix.js"></script>
  </body>
</html>
